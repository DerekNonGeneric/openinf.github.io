*,
*::before,
*::after {
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  background-color: $color-inf-eigengrau--inverted;
  font-family: "Open Sans", sans-serif;
  font-size: 16px;
  font-weight: $bold-font-weight-regular;
  line-height: 1.5;
  margin: 0;
  padding: 0;
}

.container {
  margin: 0 auto;
  max-width: 1280px;
  padding: 0 ($grid-gutter / 2);
  width: 100%;
}

.page-title {
  font-size: 36px;
  line-height: 54px;
  margin: 50px 0 0;
}

@media (min-width: $bp-tablet) {
  .container {
    padding: 0 45px;
  }

  .page-title {
    font-size: 54px;
    line-height: 81px;
    text-align: end;
  }
}

/* FONT FACES!!! */

@font-face {
  font-family: 'Eczar';
  font-weight: 400;
  font-display: swap;
  src: local('Eczar Regular'), local('Eczar-Regular'), url(/ui/f/Eczar/Eczar-Regular.woff2) format('woff2');
}
@font-face {
  font-family: 'Eczar';
  font-weight: 500;
  font-display: swap;
  src: local('Eczar Medium'), local('Eczar-Medium'), url(/ui/f/Eczar/Eczar-Medium.woff2) format('woff2');
}
@font-face {
  font-family: 'Eczar';
  font-weight: 600;
  font-display: swap;
  src: local('Eczar SemiBold'), local('Eczar-SemiBold'), url(/ui/f/Eczar/Eczar-SemiBold.woff2) format('woff2');
}
@font-face {
  font-family: 'Eczar';
  font-weight: 700;
  font-display: swap;
  src: local('Eczar Bold'), local('Eczar-Bold'), url(/ui/f/Eczar/Eczar-Bold.woff2) format('woff2');
}
@font-face {
  font-family: 'Eczar';
  font-weight: 800;
  font-display: swap;
  src: local('Eczar ExtraBold'), local('Eczar-ExtraBold'), url(/ui/f/Eczar/Eczar-ExtraBold.woff2) format('woff2');
}
@font-face {
  font-family: 'IM Fell English';
  font-style: normal;
  font-display: swap;
  src: local('IM FELL English Roman'), local('IM_FELL_English_Roman'), url(/ui/f/IMFell/IM_FELL_English_Roman.woff2) format('woff2');
}
@font-face {
  font-family: 'IM Fell English';
  font-style: italic;
  font-display: swap;
  src: local('IM FELL English Roman'), local('IM_FELL_English_Roman'), url(/ui/f/IMFell/IM_FELL_English_Italic.woff2) format('woff2');
}
@font-face {
  font-family: 'IM Fell English SC';
  font-style: normal;
  font-display: swap;
  src: local('IM FELL English SC'), local('IM_FELL_English_SC'), url(/ui/f/IMFell/IM_FELL_English_SC.woff2) format('woff2');
}

/* ---------------------------------------------------------------------------------
   Generic styles
   --------------------------------------------------------------------------------- */

html, body {
  margin: 0;
  padding: 0;
  font-family: Georgia Pro, Georgia, serif;
  min-height: 100vh;
}

html {
  background: #FFF; /* hack to force the body background to stay on body and not be hoisted to the canvas, thus allowing Chrome to composite things onto the body background */
}

@media (max-width: 40em) {
  body {
    hyphens: auto;
  }
}
// @media (min-width: 40em) {
//   body {
//     background:
//       linear-gradient(180deg, rgba(255,128,0,0.033), 3em, rgba(255,216,0,0) 33em),
//       linear-gradient(
//         90deg,
//         hsla(34deg,0%,96%,0.98) 5%, 10%,
//         hsla(34deg,38%,99%,0.95) 25%, 33%,
//         hsla(34deg,38%,99%,1) 50%, 67%,
//         hsla(34deg,38%,99%,0.975) 75%, 90%,
//         hsla(34deg,0%,96%,0.98) 95%
//         ) 0 0 / 100% 100% no-repeat,
//       linear-gradient(179deg, hsla(34deg,38%,99%,1) 11em, hsla(34deg,38%,99%,0) 13em),
//       linear-gradient(0deg, hsla(34deg,38%,99%,1) 23em, hsla(34deg,38%,99%,0) 42em),
//       url(i/hamonshu/bg-waves.png) 0 0,
//       url(i/hamonshu/bg-waves.png) 250px -50px,
//       hsla(34deg,38%,99%,1)
//     ;
//   }
// }

h1, h2, h3, h4, h5, h6 {
  font-family: Eczar, IM Fell English, Georgia, serif;
  font-weight: 500;
  line-height: 1.2;
  margin: 1.5em 0 0.5em;
}
h2 {font-size: 200%;}
h3 {font-size: 167%;}
h4 {font-size: 133%;}
h5 {font-size: 115%;}
h6 {font-size: 100%;}

h1 {
  font-family: IM Fell English, Eczar, Georgia, serif;
  font-variant-numeric: lining-nums;
  font-size: 400%;
  line-height: 1.1;
  hanging-punctuation: first allow-end;
  margin: 0.67em 0 0.67em -0.1em;
}

@media (max-width: 40em) {
  h1 {font-size: 300%;}
}
@media (max-width: 30em) {
  h1 {font-size: 250%;}
}

#main > h1 + p::first-line,
#main > h2 + p::first-line,
#main > h3 + p::first-line {
  font-size: 110%;
  line-height: 1.33;
}
p.note {
  font-style: italic;
  font-size: smaller;
  text-indent: 0;
}
p.signature {
  font-family: IM Fell English SC, Eczar, Georgia, serif;
  font-style: italic;
  font-size: 120%;
}
p.signature::before {
  content: "â€” ";
}

.title a[href] {
  text-underline-offset: 0.15em;
}

a[href] {
  text-decoration-thickness: 0.03875em;
  text-underline-offset: 0.2em;
  text-decoration-color: hsl(187,13%,67%);
  color: hsl(187,33%,42%);
}
a[href]:hover {
  text-decoration-thickness: 0.125em;
  text-underline-offset: 0.15em;
  text-decoration-color: currentColor;
}
@supports (text-decoration-thickness: 1px) {
  a[href]:hover {
    color: hsl(187,99%,33%);
  }
}

h1 a[href], h2 a[href], h3 a[href] {
  text-decoration-color: currentColor;
}

img, video {
  max-width: 100%;
}

code, kbd, tt, pre, xmp {
  font-family: Consolas, monospace;
  font-size: 0.933em;
  hyphens: none;
}
code {
  color: hsl(25deg,75%,25%);
}
kbd {
  color: hsl(145deg,75%,25%);
}
tt {
  color: hsl(25deg,15%,40%);
}

pre > code {
  margin: 1em 0;
  line-height: 1.2;
}
:not(pre) > code, :not(pre) > kbd {
  background: hsla(25deg,75%,25%,0.1);
  padding: 0.15em 0.33em 0.1em;
  border: solid #FFF8;
  border-width: 2px 0;
}
:not(pre) > kbd {
  background-image: linear-gradient(135deg, transparent,rgba(255,255,255,0.1),transparent);
  background-color: hsla(25deg,0%,0%,0.1);
}

pre, xmp {
  margin: 1.5em 0.25ch;
  border-radius: 0.25em;
  padding: 1em;
  background:
    linear-gradient(to right, hsla(25deg,0%,33%,0.1), 67%, hsla(25deg,0%,33%,0.075));
  white-space: pre-wrap;
  overflow-wrap: break-word;
}
pre + pre, xmp + xmp {
  margin-top: -0.5em;
}
pre[class], xmp[class] {
  background:
    linear-gradient(to right, hsla(25deg,75%,25%,0.1), 67%, hsla(25deg,75%,25%,0.075));
}

pre[class]::before, xmp[class]::before {
  display: block;
  padding: 0.125ch;
  margin: -1em -1em 1em;
  border-radius: 0.25em 0 0 0.25em;
  content: attr(class);
  text-align: center;
  text-transform: uppercase;
  font: 600 90% Eczar, serif;
  background: hsla(25deg,75%,31%,0.075);
  color: hsla(33deg,50%,10%,0.75);
}

@media (min-width: 40em) {
  pre[class], xmp[class] {
    display: grid;
    grid-template-columns: 1fr min-content;
    margin-right: -1.75em;
    padding: 0 0 0 1em;
  }
  pre[class]::before, xmp[class]::before {
    grid-column: 2;
    grid-row: 1 / -1;
    margin: 0 0 0 1em;
    padding-left: 0.05ch;
    writing-mode: vertical-lr;
  }
}

del {
  opacity: 0.4;
  text-decoration-thickness: 0.25em;
  text-decoration-color: rgba(0,0,0,0.5);
}
ins {
  background: rgba(255,255,0,0.5);
  border: solid #FFF8;
  border-width: 2px 0;
}

// div:not(#main) ul, div:not(#main) ol {
//   margin: 0;
//   padding: 0;
// }

#main > dl dt {
  text-align: left;
  margin: 1.5em 0 0;
  padding: 0;
  border-right: none;
  font-weight: 600;
}
#main > dl dd {
  margin: 0.5em 0;
  padding: 0 0 0 1em;
  max-width: 75ch;
}

@media (min-width: 45em) {
  #main > dl.compact {
    display: grid;
    grid-template-columns: 16ch 1fr;
    align-items: baseline;
  }
  #main > dl.compact dt {
    text-align: right;
    margin: 0.5em 0;
    padding: 0 0.5em 0 0;
    border-right: 0.125em solid rgba(0,0,0,0.5);
  }
  #main > dl.compact dd {
    margin: 0.5em 0;
    padding: 0 0.5em;
    max-width: 75ch;
  }
}

// blockquote {
//   color: hsl(33deg,5%,33%);
//   margin: 1.5em 1em;
//   padding: 1em 2em;
//   font-style: italic;
//   background-image:
//     url(i/hamonshu/quote-open.png),
//     url(i/hamonshu/quote-close.png),
//     linear-gradient(90deg, transparent 1.25em, currentColor 2.5em, transparent),
//     linear-gradient(90deg, transparent, currentColor calc(100% - 2.5em), transparent calc(100% - 1.25em))
//   ;
//   background-repeat: no-repeat;
//   background-size: auto 1em, auto 1em, 100% 1px, 100% 1px;
//   background-position: 0% 0%, 100% 100%, 50% 0%, 50% 100%;
// }
blockquote > *:first-child {
  margin-top: 0;
}
blockquote > *:last-child {
  margin-bottom: 0;
}
blockquote p.attrib,
blockquote + p.attrib {
  font-size: 90%;
  font-style: normal;
}


.framed {
  border: 3px double currentColor;
}
img.border {
  border: 2px solid currentColor;
}

img.book {
  border: 1px solid rgba(0,0,0,0.1);
}
img.book.cover {
  filter:
    drop-shadow(0.33em 0.33em 0.125em rgba(0,0,0,0.125))
    drop-shadow(0.25em 0.25em 0.125em rgba(0,0,0,0.33))
    drop-shadow(0.1em 0.1em 0.125em rgba(0,0,0,0.25))
    drop-shadow(0 0 0.2em rgba(0,0,0,0.1))
  ;
}
img.book.cover.big {
  filter:
    drop-shadow(0.1em 0.1em 0.125em rgba(0,0,0,0.25))
    drop-shadow(0.15em 0.15em 0.15em rgba(0,0,0,0.25))
    drop-shadow(0.33em 0.33em 0.15em rgba(0,0,0,0.15))
    drop-shadow(0.5em 0.5em 0.2em rgba(0,0,0,0.2))
    drop-shadow(0.67em 0.67em 0.25em rgba(0,0,0,0.25))
    drop-shadow(1.33em 1.33em 0.33em rgba(0,0,0,0.3))
    drop-shadow(0 0 0.2em rgba(0,0,0,0.1))
  ;
}

table.data {
  margin: 1.5em 0;
  border-collapse: separate;
  border-spacing: 1px;
  min-width: 50%;
}

table.data caption {
  font-style: italic;
  font-size: 90%;
  line-height: 1.2;
  margin-top: 0.15em;
  caption-side: bottom;
}

table.data :not(caption) {
  font: 1em Source Sans Pro, Open Sans, Helvetica, sans-serif;
}

table.data th {
  padding: 0.5ch 1ch 0.25ch;
  font-weight: 550;
}

table.data td {
  padding: 0.25ch 1ch 0.15ch;
}

table.data thead th {
  background: hsla(30,50%,50%,0.5);
}

table.data tbody tr:nth-child(odd) > * {
  background: hsla(30,50%,50%,0.13);
}

table.data tbody tr:nth-child(even) > * {
  background: hsla(30,50%,50%,0.25);
}

table.data :not(thead) + tbody tr:first-child > * {
  border-top: 2px solid hsla(30,50%,50%,0.5);
}

table.data tbody tr:last-child > * {
  border-bottom: 2px solid hsla(30,50%,50%,0.5);
}
table.chart {
  border-collapse: separate;
  border-spacing: 0;
  margin: 1.5em 0;
}
table.chart th, table.chart td {
  padding: 0.75em 0.5em;
  text-align: left;
  vertical-align: top;
}
table.chart tbody tr td {
  border-top: 1px solid rgba(0,0,0,0.25);
}
table.chart td > :only-child {
  margin: 0;
}

hr.fallback {
  display: none;
}

hr {
  border-bottom: $border-width solid $brand-subtle;
}
